## Turtle Start ##
@prefix schema:    <http://schema.org/> .
@prefix cc:        <http://creativecommons.org/ns#> .
@prefix xsd:       <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs:      <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:       <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix opllic:    <http://www.openlinksw.com/ontology/licenses#> .
@prefix oplsof:    <http://www.openlinksw.com/ontology/software#> .
@prefix oplpro:    <http://www.openlinksw.com/ontology/products#> .
@prefix owl:       <http://www.w3.org/2002/07/owl#> .
@prefix wdrs:      <http://www.w3.org/2007/05/powder-s#> .
@prefix foaf:      <http://xmlns.com/foaf/0.1/> .
@prefix dcterms:   <http://purl.org/dc/terms/> .
@prefix skos:      <http://www.w3.org/2004/02/skos/core#> .
@prefix acl:       <http://www.w3.org/ns/auth/acl#> .
@prefix oplacl:    <http://www.openlinksw.com/ontology/acl#> .
@prefix oplres:    <http://www.openlinksw.com/ontology/restrictions#> .
@prefix http:      <http://www.w3.org/2011/http-headers#> .
@prefix oplofr:    <http://www.openlinksw.com/ontology/offers#> .
@prefix oplprchs:  <http://www.openlinksw.com/ontology/purchases#> .
@prefix gr:        <http://purl.org/goodrelations/v1#> .
@prefix source:    <http://virtuoso.openlinksw.com/data/turtle/GraphAccessOffers-License-Prices.ttl> .
@prefix :          <#> . # Base URI for this document's entities

# --- Document Metadata (Simplified Stub) ---

source: a schema:CreativeWork ;
    schema:name "Knowledge Graph Access Offers Definitions" ;
    schema:comment "This document describes sample offers for access to specific knowledge graphs." ;
    schema:author <http://www.openlinksw.com/#this> ; # Placeholder
    cc:attributionName "OpenLink Software Example" ;
    schema:datePublished "2025-10-30T00:00:00Z"^^xsd:dateTime .

# --- Offer Group ---

<http://data.openlinksw.com/oplweb/OfferGroupGraphAccess#this> a oplofr:OfferGroup ;
    schema:name "Specific Knowledge Graph Access Offers" ;
    rdfs:label "Specific Knowledge Graph Access Offers" .

# --- Licensed Product / Service  ---

# Knowledge graph access
<http://data.openlinksw.com/oplweb/ods-qaDA#this> a schema:WebAPI ;
    schema:name "Knowledge graph access via ods-qa"@en ;
    schema:applicationCategory "Data Access"@en ;
    schema:applicationSubCategory "ACL controlled knowledge graph access"@en ;
    schema:description """Knowledge graph hosted by ods-qa, can be explored via the /sparql endpoint."""@en ;
# -- OPAL server needed to create the ACLs
    skos:related <http://data.openlinksw.com/oplweb/ods-qaOPAL#this> ;
    schema:provider [
        a schema:Organization ;
        schema:name "OpenLink Software"@en ;
        schema:url <https://www.openlinksw.com/> ;
    ] ;
    schema:url <https://ods-qa.openlinksw.com/> ;
    schema:hasPart
        [
            a schema:WebAPI ;
            schema:name "SPARQL Query Service Endpoint"@en ;
            schema:description """HTTP SPARQL Query Service Endpoint."""@en ;
            schema:serviceType "SPARQL Query Service"@en ;
            schema:url <https://ods-qa.openlinksw.com/sparql> .
        ] .

<http://data.openlinksw.com/oplweb/URIBurnerDA#this> a schema:WebAPI ;
    a schema:Service ;
    schema:name "Knowledge graph access via URIBurner"@en ;
    schema:applicationCategory "Data Access"@en ;
    schema:applicationSubCategory "ACL controlled knowledge graph access"@en ;
    schema:description """Knowledge graph hosted by ub-server, can be explored via the /sparql endpoint."""@en ;
    schema:softwareVersion "1.0"@en ;
# -- OPAL server needed to create the ACLs
    skos:related <http://data.openlinksw.com/oplweb/URIBurnerOPAL#this> ;
    schema:provider [
        a schema:Organization ;
        schema:name "OpenLink Software"@en ;
        schema:url <https://www.openlinksw.com/> ;
    ] ;
    schema:url <https://ub-server.openlinksw.com/> ;
    schema:hasPart
        [
            a schema:WebAPI ;
            schema:name "SPARQL Query Service Endpoint"@en ;
            schema:description """HTTP SPARQL Query Service Endpoint."""@en ;
            schema:serviceType "SPARQL Query Service"@en ;
            schema:url <https://ub-server.openlinksw.com/sparql> .
        ] .

# --- Specific Knowledge Graph Access Offers ---
# -- Price Specification --
<http://data.openlinksw.com/oplweb/offer-unitprice/DemoGraphAccessPriceSpecification#this> a schema:UnitPriceSpecification, oplofr:RetailUnitPriceSpecification ;
    schema:priceCurrency "USD"^^xsd:string ;
    schema:price "49.99"^^xsd:decimal ;
    schema:unitCode "C62"^^xsd:string ; # Piece
    schema:name "Demo Graph Access" ;
    schema:validFrom "2025-10-01T00:00:00Z"^^xsd:dateTime ; # Placeholder
    schema:validThrough "2025-12-31T23:59:59Z"^^xsd:dateTime ; # Placeholder
    oplofr:interval "month"^^xsd:string ;
    oplofr:intervalCount "1"^^xsd:integer ;
    wdrs:describedby source: .

# -- License Description (ods-qa server)--
<http://data.openlinksw.com/oplweb/license/DemoGraphAccessLicenseOds-qa#this> a opllic:ProductLicense, opllic:ExpiringLicense, opllic:Product, opllic:ACLOnly, opllic:SubscriptionLicense  ;
    oplsof:hasOperatingSystemFamily   oplsof:OSFamilyAny ;
    oplsof:hasDatabaseFamily oplsof:WorldWideWeb ;
    schema:image <https://www.openlinksw.com/DAV/oplweb3/images/controlled-access-to-data-assets.jpg> ;
    schema:name "Demo Graph Access License for ods-qa" ;
    skos:prefLabel "Demo Graph Access License for ods-qa" ;
    skos:altLabel "Demo Graph Access License for ods-qa" ;
    schema:description "License to access the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph on a read-only basis." ;
    opllic:productLicenseOf <http://data.openlinksw.com/oplweb/ods-qaOPAL#this> ;
    opllic:partOf <http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferOds-qa#this> ;
    opllic:hasDuration <http://data.openlinksw.com/oplweb/license/License-Duration#annual> ;
    wdrs:describedby source: .

# -- Offer Description --
<http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferOds-qa#this> a schema:Offer, oplofr:SubscriptionOffer, oplofr:DemoGraphAccessOffer ;
    oplofr:offerNumber "DEMOACCESS-ODSQA-001"^^xsd:string ;
    schema:name "Demo Knowledge Graph Access on ods-qa" ;
    skos:prefLabel "Demo Knowledge Graph Access on ods-qa" ;
    schema:comment "This allows you to explore the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph on a read-only basis." ;
    schema:description "Demo knowledge graph access on ods-qa allowing read-only access to the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph." ;
    wdrs:describedby source: ;
    schema:businessFunction gr:Sell ;
    schema:itemOffered <http://data.openlinksw.com/oplweb/license/DemoGraphAccessLicenseOds-qa#this> ;
    schema:priceSpecification <http://data.openlinksw.com/oplweb/offer-unitprice/DemoGraphAccessPriceSpecification#this> ;
    oplofr:isMemberOf <http://data.openlinksw.com/oplweb/OfferGroupGraphAccess#this> ;
    schema:validFrom "2025-10-01T00:00:00Z"^^xsd:dateTime ; # Placeholder
    schema:validThrough "2025-12-31T23:59:59Z"^^xsd:dateTime ; # Placeholder
    schema:potentialAction <https://shop.openlinksw.com/cart.vsp?command=add&item=http%3A%2F%2Fdata.openlinksw.com%2Foplweb%2Foffer%2FDemoGraphAccessOfferOds-qa%23this> ;
    skos:related [oplpro:hasFamily    <http://data.openlinksw.com/oplweb/product_family/virtuoso#this> ] .

# -- License Description (ub-server server)--
<http://data.openlinksw.com/oplweb/license/DemoGraphAccessLicenseub-server#this> a opllic:ProductLicense, opllic:ExpiringLicense, opllic:Product, opllic:ACLOnly, opllic:SubscriptionLicense  ;
    oplsof:hasOperatingSystemFamily   oplsof:OSFamilyAny ;
    oplsof:hasDatabaseFamily oplsof:WorldWideWeb ;
    schema:image <https://www.openlinksw.com/DAV/oplweb3/images/opal-license.png> ;
    schema:name "Demo Graph Access License for ub-server" ;
    skos:prefLabel "Demo Graph Access License for ub-server" ;
    skos:altLabel "Demo Graph Access License for ub-server" ;
    schema:description "License to access the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph on a read-only basis." ;
    opllic:productLicenseOf <http://data.openlinksw.com/oplweb/URIBurnerOPAL#this> ;
    opllic:partOf <http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferub-server#this> ;
    opllic:hasDuration <http://data.openlinksw.com/oplweb/license/License-Duration#annual> ;
    wdrs:describedby source: .

# -- Offer Description --
<http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferub-server#this> a schema:Offer, oplofr:SubscriptionOffer, oplofr:DemoGraphAccessOffer ;
    oplofr:offerNumber "DEMOACCESS-UB-001"^^xsd:string ;OPLSHOP.DBA.get_opal_service_id_from_license_uri (licenseUri);
    schema:name "Demo Knowledge Graph Access on URIBurner (UB) server" ;
    skos:prefLabel "Demo Knowledge Graph Access on URIBurner (UB) server" ;
    schema:comment "This allows you to explore the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph on a read-only basis." ;
    schema:description "Demo knowledge graph access on URIBurner (UB) server allowing read-only access to the demo graph (denoted by Graph IRI <urn:demo:graph>) knowledge graph." ;
    wdrs:describedby source: ;
    schema:businessFunction gr:Sell ;
    schema:itemOffered <http://data.openlinksw.com/oplweb/license/DemoGraphAccessLicenseub-server#this> ;
    schema:priceSpecification <http://data.openlinksw.com/oplweb/offer-unitprice/DemoGraphAccessPriceSpecification#this> ;
    oplofr:isMemberOf <http://data.openlinksw.com/oplweb/OfferGroupGraphAccess#this> ;
    schema:validFrom "2025-10-01T00:00:00Z"^^xsd:dateTime ; # Placeholder
    schema:validThrough "2025-12-31T23:59:59Z"^^xsd:dateTime ; # Placeholder
    schema:potentialAction <https://shop.openlinksw.com/cart.vsp?command=add&item=http%3A%2F%2Fdata.openlinksw.com%2Foplweb%2Foffer%2FDemoGraphAccessOfferub-server%23this> ;
    skos:related [oplpro:hasFamily    <http://data.openlinksw.com/oplweb/product_family/virtuoso#this> ] .


# --- Link provider to offers ---
<http://www.openlinksw.com/dataspace/organization/openlink#this> schema:makesOffer
    <http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferOds-qa#this> ,
    <http://data.openlinksw.com/oplweb/offer/DemoGraphAccessOfferub-server#this> .

## Group Definitions for each offer type
<http://data.openlinksw.com/oplweb/group/DemoGraphAccessUsers#this> a oplacl:ConditionalGroup ;
  foaf:name "Users identified using a NetID based Identifier who have purchased the demo graph access offer and whose license is in date" ;
  oplacl:hasCondition [
    a oplacl:GroupCondition, oplacl:QueryCondition ;
    oplacl:hasQuery "prefix oplprchs:  <http://www.openlinksw.com/ontology/purchases#>prefix opllic:   <http://www.openlinksw.com/ontology/licenses#>prefix oplofr:    <http://www.openlinksw.com/ontology/offers#>prefix schema:    <http://schema.org/> ask from <urn:openlinksw.com:shop:purchases:cache> where {{select ?purchase where {^{uri}^ oplprchs:madePurchase ?purchase .}} union {select ?purchase where {?o owl:sameAs ^{uri}^ ; oplprchs:madePurchase ?purchase .}} ?purchase oplprchs:contains ?offer ;   oplprchs:purchaseDate ?purchaseDate . ?offer a oplofr:DemoGraphAccessOffer ; schema:itemOffered ?license .  ?license opllic:hasDuration ?duration .  ?duration opllic:durationYears ?years .  filter (bif:dateadd (\'day\', bif:atoi(?years) * 365, ?purchaseDate) > bif:now()) . filter (sql:stripe_customer_has_active_product_subscription (^{uri}^, ?license) > 0) .}"
     ] .


## Graph Access
oplacl:demo-graph-access a acl:Authorization ;
  schema:name "Rule to allow access to the demo graph" ;
  acl:accessTo <urn:demo:graph> ;
  oplacl:hasAccessMode oplacl:Read ;
  oplacl:hasRealm oplacl:DefaultRealm ;
  oplacl:hasScope oplacl:PrivateGraphs ;
  acl:agent <http://data.openlinksw.com/oplweb/group/DemoGraphAccessUsers#this> ;
  wdrs:describedby <#source> .

##Â Restrictions

## Limits

## Turtle End ##
